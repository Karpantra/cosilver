
<div class="container">
<div class="container-index text-center col-xs-12 col-md-8">
  <div class="row">
         <% @services.each do |service| %>
     <div class="col-xs-12 col-sm-6">
            <figure class="snip1139">
              <blockquote> <%= service.description.first(70) %>...
                <div class="arrow"></div>
              </blockquote>
              <%= cl_image_tag service.provider.photos.first.path, width: 300, height: 200, crop: :fill %>
              <div class="author">
                <h5><%= service.title %> <span><%= service.category %></span>
                <%= link_to "DÃ©tails", service_path(service) %></h5>
              </div>
            </figure>

      </div>
        <% end %>
    </div>
  </div>

<div class="mappy col-xs-12 col-md-4">
  <div class="card">
    <div id="map" style="width: 100%; height: 100vh;"></div>
  </div>
</div>
</div>


<% content_for(:after_js) do %>
<script>
  $(document).ready(function() {
    var handler = Gmaps.build('Google');
    handler.buildMap({ internal: { id: 'map' } }, function() {
      markers = handler.addMarkers(<%= raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      if (markers.length == 0) {
        handler.getMap().setZoom(2);
      } else if (markers.length == 1) {
        handler.getMap().setZoom(14);
      }
    });
  });
</script>
<% end %>



